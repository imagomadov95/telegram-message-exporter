# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Telegram Message Exporter

## üèó –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö **SOLID** –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Å–ª–æ–∏—Å—Ç—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏, —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏ –∏ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ–º–æ—Å—Ç–∏ –∫–æ–¥–∞.

## üìä –î–∏–∞–≥—Ä–∞–º–º–∞ —Å–ª–æ–µ–≤

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            Controllers              ‚îÇ
‚îÇ         (telegram-exporter)         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ              Services               ‚îÇ
‚îÇ   Authentication ‚îÇ Message ‚îÇ etc.   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ               Utils                 ‚îÇ
‚îÇ  Config ‚îÇ FileService ‚îÇ UI ‚îÇ etc.   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ              Models                 ‚îÇ
‚îÇ        Types ‚îÇ Interfaces           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ          External APIs              ‚îÇ
‚îÇ         Telegram ‚îÇ File System      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. Models Layer (–ú–æ–¥–µ–ª–∏)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

**–§–∞–π–ª—ã**:
- `types.ts` - –í—Å–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `interfaces.ts` - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–ü—Ä–∏–Ω—Ü–∏–ø—ã**:
- –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- Immutable –æ–±—ä–µ–∫—Ç—ã –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –ø–æ –¥–æ–º–µ–Ω–∞–º

### 2. Utils Layer (–£—Ç–∏–ª–∏—Ç—ã)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:

#### ConfigManager
- **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–ü—Ä–∏–Ω—Ü–∏–ø**: Single Responsibility
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: `IConfigManager`

#### FileService  
- **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –∏ —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–∏–Ω—Ü–∏–ø**: Open/Closed - –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –Ω–æ–≤—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: `IFileService`

#### TextProcessor
- **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
- **–ü—Ä–∏–Ω—Ü–∏–ø**: Single Responsibility
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: `ITextProcessor`

#### UserInterface
- **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- **–ü—Ä–∏–Ω—Ü–∏–ø**: Dependency Inversion - –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: `IUserInterface`

### 3. Services Layer (–°–µ—Ä–≤–∏—Å—ã)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### SessionManager
```typescript
class SessionManager implements ISessionManager {
  // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ Telegram
  // –ü—Ä–∏–Ω—Ü–∏–ø—ã: SRP, –∑–∞–∫—Ä—ã—Ç–æ—Å—Ç—å –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏
}
```

#### AuthenticationService  
```typescript
class AuthenticationService implements IAuthenticationService {
  // –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤ Telegram
  // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: SessionManager
}
```

#### ContactService
```typescript
class ContactService implements IContactService {
  // –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏
  // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: TelegramClient, FileService
}
```

#### DialogService
```typescript
class DialogService implements IDialogService {
  // –†–∞–±–æ—Ç–∞ —Å –¥–∏–∞–ª–æ–≥–∞–º–∏ (–≥—Ä—É–ø–ø—ã/–∫–∞–Ω–∞–ª—ã)
  // –ü—Ä–∏–Ω—Ü–∏–ø: Interface Segregation
}
```

#### MessageService
```typescript
class MessageService implements IMessageService {
  // –≠–∫—Å–ø–æ—Ä—Ç –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π
  // –°–ª–æ–∂–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
}
```

#### MemberService
```typescript
class MemberService implements IMemberService {
  // –†–∞–±–æ—Ç–∞ —Å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ –≥—Ä—É–ø–ø
  // –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: TelegramClient, FileService
}
```

### 4. Controllers Layer (–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã)

#### TelegramMessageExporter
```typescript
class TelegramMessageExporter implements ITelegramExporter {
  // –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  // –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
  // –ü—Ä–∏–Ω—Ü–∏–ø: Dependency Injection
}
```

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –º–µ–∂–¥—É —Å–ª–æ—è–º–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üéØ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ SOLID

### Single Responsibility Principle (SRP)
–ö–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –∏–º–µ–µ—Ç –æ–¥–Ω—É –ø—Ä–∏—á–∏–Ω—É –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- `ConfigManager` - —Ç–æ–ª—å–∫–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- `FileService` - —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `AuthenticationService` - —Ç–æ–ª—å–∫–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### Open/Closed Principle (OCP)
–ö–ª–∞—Å—Å—ã –æ—Ç–∫—Ä—ã—Ç—ã –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –∑–∞–∫—Ä—ã—Ç—ã –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏:
```typescript
// –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞
class FileService {
  private convertToCSV(data: any): string { /* ... */ }
  private convertToXML(data: any): string { /* NEW */ }
}
```

### Liskov Substitution Principle (LSP)
–õ—é–±–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –º–æ–∂–µ—Ç –∑–∞–º–µ–Ω–∏—Ç—å –¥—Ä—É–≥—É—é:
```typescript
// –ú–æ–∂–Ω–æ –ª–µ–≥–∫–æ –∑–∞–º–µ–Ω–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
let ui: IUserInterface = new ConsoleUI();
ui = new WebUI(); // –ü–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–µ–∑ –Ω–∞—Ä—É—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã
```

### Interface Segregation Principle (ISP)
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:
```typescript
// –í–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ –±–æ–ª—å—à–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
interface IMessageService { /* —Ç–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏—è */ }
interface IMemberService { /* —Ç–æ–ª—å–∫–æ —É—á–∞—Å—Ç–Ω–∏–∫–∏ */ }
interface IContactService { /* —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ç–∞–∫—Ç—ã */ }
```

### Dependency Inversion Principle (DIP)
–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π, –Ω–µ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤:
```typescript
class TelegramExporter {
  constructor(
    private messageService: IMessageService, // –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è
    private contactService: IContactService  // –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è
  ) {}
}
```

## üîÑ –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
User Input ‚Üí TelegramExporter ‚Üí ConfigManager ‚Üí SessionManager ‚Üí AuthenticationService
```

### 2. –≠–∫—Å–ø–æ—Ä—Ç —Å–æ–æ–±—â–µ–Ω–∏–π
```
User Selection ‚Üí DialogService ‚Üí MessageService ‚Üí FileService ‚Üí File Output
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π
```
Timer ‚Üí MessageService ‚Üí TelegramClient ‚Üí MessageService ‚Üí UserInterface
```

## üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å

### Dependency Injection
–í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–Ω–∂–µ–∫—Ç–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã:
```typescript
class MessageService {
  constructor(
    private client: TelegramClient,    // –º–æ–∂–Ω–æ –∑–∞–º–æ–∫–∞—Ç—å
    private fileService: FileService  // –º–æ–∂–Ω–æ –∑–∞–º–æ–∫–∞—Ç—å
  ) {}
}
```

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –º–æ–∫–æ–≤
```typescript
// –í —Ç–µ—Å—Ç–∞—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–∫–∏
const mockFileService: IFileService = {
  saveToFile: jest.fn(),
  findMessageFiles: jest.fn(),
  createBackup: jest.fn()
};
```

## üîå –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞

1. **–†–∞—Å—à–∏—Ä–∏—Ç—å enum**:
```typescript
export type ExportFormat = 'json' | 'csv' | 'xml'; // –¥–æ–±–∞–≤–∏–ª–∏ xml
```

2. **–†–∞—Å—à–∏—Ä–∏—Ç—å FileService**:
```typescript
private convertToXML(data: any): string {
  // –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
}
```

3. **–û–±–Ω–æ–≤–∏—Ç—å switch statement**:
```typescript
switch (format.toLowerCase()) {
  case 'xml':
    content = this.convertToXML(data);
    break;
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

1. **–°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**:
```typescript
export interface IAnalyticsService {
  generateReport(data: Message[]): AnalyticsReport;
}
```

2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å**:
```typescript
export class AnalyticsService implements IAnalyticsService {
  generateReport(data: Message[]): AnalyticsReport {
    // –õ–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
  }
}
```

3. **–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä**:
```typescript
class TelegramExporter {
  private analyticsService: IAnalyticsService;
  
  constructor() {
    this.analyticsService = new AnalyticsService();
  }
}
```

## üõ° –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ø–æ —Å–ª–æ—è–º

#### Utils Layer
```typescript
// –í—ã–±—Ä–∞—Å—ã–≤–∞—é—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏
throw new Error(`Configuration file ${file} not found`);
```

#### Services Layer  
```typescript
// –õ–æ–≤—è—Ç, –ª–æ–≥–∏—Ä—É—é—Ç –∏ –ø–µ—Ä–µ–±—Ä–∞—Å—ã–≤–∞—é—Ç
try {
  // –æ–ø–µ—Ä–∞—Ü–∏—è
} catch (error) {
  console.error('Service error:', error);
  throw new ServiceError('Failed to process request', error);
}
```

#### Controllers Layer
```typescript
// –§–∏–Ω–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
try {
  await this.service.doSomething();
} catch (error) {
  this.ui.displayError(error.message);
}
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ I/O –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `async/await` –≤–º–µ—Å—Ç–æ callbacks
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ

### –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
```typescript
// –£—á–∞—Å—Ç–Ω–∏–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
for await (const participant of this.client.iterParticipants()) {
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ –æ–¥–Ω–æ–º—É
}
```

### Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞
```typescript
// –°–æ–æ–±—â–µ–Ω–∏—è –≤ –≥—Ä—É–ø–ø–∞—Ö –ø–æ 100
if (totalMessages % 100 === 0) {
  console.log(`Processed ${totalMessages} messages...`);
}
```

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```
1. Initialization
   ‚îú‚îÄ‚îÄ Config Loading
   ‚îú‚îÄ‚îÄ Session Management  
   ‚îî‚îÄ‚îÄ Service Setup

2. Authentication
   ‚îú‚îÄ‚îÄ Session Validation
   ‚îú‚îÄ‚îÄ User Authentication
   ‚îî‚îÄ‚îÄ Session Saving

3. Main Loop
   ‚îú‚îÄ‚îÄ Menu Display
   ‚îú‚îÄ‚îÄ User Input Processing
   ‚îú‚îÄ‚îÄ Service Execution
   ‚îî‚îÄ‚îÄ Result Display

4. Cleanup
   ‚îú‚îÄ‚îÄ Session Saving
   ‚îú‚îÄ‚îÄ Connection Closing
   ‚îî‚îÄ‚îÄ Resource Cleanup
```

## üé® –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Strategy Pattern
```typescript
// –†–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞
interface ExportStrategy {
  export(data: any): string;
}

class JSONExportStrategy implements ExportStrategy { }
class CSVExportStrategy implements ExportStrategy { }
```

### Factory Pattern
```typescript
// –§–∞–±—Ä–∏–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
class ServiceFactory {
  static createMessageService(client: TelegramClient): IMessageService {
    return new MessageService(client, new FileService());
  }
}
```

### Observer Pattern
```typescript
// –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π
class MessageMonitor {
  private observers: MessageObserver[] = [];
  
  addObserver(observer: MessageObserver): void { }
  notifyObservers(message: Message): void { }
}
```

–≠—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ  
- ‚úÖ **–°–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ–º–æ—Å—Ç—å** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å–ª–æ—è—Ö
- ‚úÖ **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö
- ‚úÖ **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - TypeScript –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏